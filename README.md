Heart Risk Prediction API

## Описание
Проект для предсказания риска сердечного приступа на основе медицинских данных.  
Модель обучается в Jupyter Notebook (`main.ipynb`), сохраняется в `model.pkl` и используется в FastAPI приложении (`app.py`).  

API принимает CSV с данными пациентов и возвращает предсказания.

----------------------
## Установка и запуск 

1) Клонирование и вход в папку проекта

git clone <repo_url>
cd <repo_folder>

2) Установка зависимостей
pip install -r requirements.txt

3) Обучение модели (в ноутбуке main.ipynb)
 - Запусти ноутбук, обучи модель и сохрани её:
 joblib.dump(model, "model.pkl")

4) Запуск API

uvicorn app:app --reload

Проверка:
Корневой эндпоинт: http://127.0.0.1:8000/
Swagger UI (документация): http://127.0.0.1:8000/docs

5) Сравнение предсказаний с эталоном
После того как API сформирует файл predicted.csv, сравни его с эталонными ответами:

    python test.py --student predicted.csv --correct correct_answers.csv
----------------------
## Использование API

1) Открой http://127.0.0.1:8000/docs
2) Выбери POST /predict → Try it out → прикрепи CSV.
3) Формат входного CSV:
 - Обязательная колонка: id
 - Остальные признаки (как в обучении)
4)Пример ответа:
    [
      {"id": 101, "prediction": 0},
      {"id": 102, "prediction": 1}
    ]
Возвращается список записей, каждая — словарь с id и бинарным prediction.

----------------------
## Структура проекта
project/
│── main.ipynb        # ноутбук для анализа данных, обучения и сохранения модели (model.pkl)
│── app.py            # FastAPI-приложение (загружает model.pkl и обрабатывает запросы /predict)
│── predictor.py      # класс Predictor с логикой препроцессинга и вызова модели
│── requirements.txt  # зависимости проекта с зафиксированными версиями
│── README.md         # документация проекта
│── predicted.csv     # (опционально) предсказания, сохранённые локально через API или ноутбук
│── model.pkl         # обученная и сохранённая модель (создаётся после запуска main.ipynb)
│── test.py           # скрипт для сравнения предсказаний с эталонными результатами

----------------------
## Как обучалась модель
Признаки: возраст, давление, липиды, маркеры крови, образ жизни и т.д.
Обучение — в main.ipynb:
    - Пробуются модели: Logistic Regression, Decision Tree, SVC, KNN
    - Поиск гиперпараметров через RandomizedSearchCV (метрика roc_auc)
    - Подбор масштабирования (StandardScaler/MinMaxScaler/без)
Лучший пайплайн сохраняется joblib.dump(..., "model.pkl") и используется в app.py.
